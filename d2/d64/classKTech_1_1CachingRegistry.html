<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KTech: KTech::CachingRegistry&lt; T &gt; Class Template Reference</title>
<link rel="icon" href="../../ktech-icon.png" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../ktech-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">KTech<span id="projectnumber">&#160;1.1.0</span>
   </div>
   <div id="projectbrief">C++ 2D terminal game engine library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>KTech</b></li><li class="navelem"><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html">CachingRegistry</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../da/d7d/classKTech_1_1CachingRegistry-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">KTech::CachingRegistry&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Registry that retrieves world structure pointers by serializable <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d5/db2/cachingregistry_8hpp_source.html">cachingregistry.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8091587d939700e2636535c955993a90" id="r_a8091587d939700e2636535c955993a90"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8091587d939700e2636535c955993a90">operator[]</a> (const <a class="el" href="../../d7/d9d/structKTech_1_1ID.html">ID</a>&lt; T &gt; &amp;id) -&gt; T *</td></tr>
<tr class="memdesc:a8091587d939700e2636535c955993a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve structure using its <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>.  <br /></td></tr>
<tr class="separator:a8091587d939700e2636535c955993a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03884e288bf062664a690e9474477696" id="r_a03884e288bf062664a690e9474477696"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03884e288bf062664a690e9474477696">Exists</a> (const <a class="el" href="../../d7/d9d/structKTech_1_1ID.html">ID</a>&lt; T &gt; &amp;id) -&gt; bool</td></tr>
<tr class="memdesc:a03884e288bf062664a690e9474477696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if an <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code> matches a registered structure.  <br /></td></tr>
<tr class="separator:a03884e288bf062664a690e9474477696"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a2743bf0294172086e9384cd82f12c87a" id="r_a2743bf0294172086e9384cd82f12c87a"><td class="memItemLeft" align="right" valign="top"><a id="a2743bf0294172086e9384cd82f12c87a" name="a2743bf0294172086e9384cd82f12c87a"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>Memory</b></td></tr>
<tr class="separator:a2743bf0294172086e9384cd82f12c87a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T&gt;<br />
class KTech::CachingRegistry&lt; T &gt;</div><p>Registry that retrieves world structure pointers by serializable <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>. </p>
<p>From the "How does `CachingRegistry` work?" <code>faq.md</code> entry:</p>
<blockquote class="doxtable">
<p>&zwj;<code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">KTech::ID</a></code> is initialized with a UUID value when constructed, meaning, references to world structures (classes that have an <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a> m_id</code> member) are serializable. All that is left is some kind of a container to store world structure instances or register world structure pointers, so world structures can be retrieved using their <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>s.</p>
<p>I chose to register pointers rather than store instances, and <code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">KTech::CachingRegistry</a></code> is implementation. Its purpose is to retrieve a registered world structure pointer, given a corresponding UUID. As its name suggests, it doesn't simply iterate through all registered world structures and retrieves the one that has the matching UUID, but rather, it uses some kind of caching-related optimization.</p>
<p><code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">KTech::ID</a></code> doesn't only comprise a UUID value: it also has an index (<code>ID::m_i</code>). This member is used by <code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">CachingRegistry</a></code> to cache the last known index in the registry of the associated world structure. When <code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">CachingRegistry</a></code> attempts to retrieve a world structure pointer, it first checks if the UUID of the given <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code> matches the UUID of the world structure registered at the given cached index. Optimally they match, so it simply returns the pointer from the cached index. If they don't, it iterates down the registry until it finds the matching UUID (i.e. the wanted world structure).</p>
<p><code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">CachingRegistry</a></code> will update the cached index of any <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code> it receives, expediting future usages of that <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>. The cached index of <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code> is declared <code>mutable</code>, which is how <code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">CachingRegistry</a></code> can modify it even though it asks for const-references of <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>s.</p>
<p>Additionally, considering KTech is designed to work single threaded, keeping a direct pointer to a world structure retrieved from <code><a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html" title="Registry that retrieves world structure pointers by serializable ID.">CachingRegistry</a></code> for the duration of a single function, after validating it (using <code><a class="el" href="#a03884e288bf062664a690e9474477696" title="Check if an ID matches a registered structure.">CachingRegistry::Exists()</a></code> or checking that the returned pointer is not <code>nullptr</code>), is valid practice, as nothing external should erase the pointed world structure from memory in the meantime. </p>
</blockquote>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">KTech::ID</a></code> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a03884e288bf062664a690e9474477696" name="a03884e288bf062664a690e9474477696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03884e288bf062664a690e9474477696">&#9670;&#160;</a></span>Exists()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html">KTech::CachingRegistry</a>&lt; T &gt;::Exists </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/d9d/structKTech_1_1ID.html">ID</a>&lt; T &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td> -&gt; bool
	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if an <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code> matches a registered structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">id</td><td>The structure's <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>. Updates its cached index if it's stale.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code>: the structure exists. </dd>
<dd>
<code>false</code>: ther structure doesn't exist. </dd></dl>

</div>
</div>
<a id="a8091587d939700e2636535c955993a90" name="a8091587d939700e2636535c955993a90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8091587d939700e2636535c955993a90">&#9670;&#160;</a></span>operator[]()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="../../d2/d64/classKTech_1_1CachingRegistry.html">KTech::CachingRegistry</a>&lt; T &gt;::operator[] </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/d9d/structKTech_1_1ID.html">ID</a>&lt; T &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td> -&gt; T*
	</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve structure using its <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">id</td><td>The structure's <code><a class="el" href="../../d7/d9d/structKTech_1_1ID.html" title="Serializable world structure identifier.">ID</a></code>. Updates its cached index if it's stale.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the structure. </dd>
<dd>
<code>nullptr</code> if the structure was not found. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ktech/<a class="el" href="../../df/d26/ktech_8hpp_source.html">ktech.hpp</a></li>
<li>ktech/utility/<a class="el" href="../../d5/db2/cachingregistry_8hpp_source.html">cachingregistry.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
